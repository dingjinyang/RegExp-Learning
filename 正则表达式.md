# 正则表达式

正则表达式（regulae expression)是一个描述字符串模式的对象。JavaScript 的 RegExp 类表示正则表达式类，String 和 RegExp 都定义了方法，后者使用正则表达式进行强大的模式匹配和文本检索与替换功能。JavaScript 的正则表达式是`Perl5`
的正则表达式语法的大型子集。

> Perl5 (Practical Extraction and Report Language)，它是由 Larry Wall 设计的，并由他不断更新和维护，用于在 UNIX 环境下编程的一种编程语言。[官方网站](http://www.perl.org) [中文教程](http://net.pku.edu.cn/~yhf/tutorial/perl/perl.html)

- [正则表达式的定义](#正则表达式的定义)
  - [直接量字符串](#直接量字符串)
  - [字符类](#字符类)

## 正则表达式的定义

JavaScript 的正则表达式是用 RegExp 对象表示，可是用 RegExp()构造函数来创建对象，RegExp 对象更多是通过直接量语法创建，正则表达式直接量定义为包含在一对斜杠（ / ）之间的字符。

```javascript
var pattern = new RegExp("s$"); //匹配所有以字母“s”结尾的字符串
var pattern = /s$/; //与上等价
```

> 正则表达式直接量与对象、数组、字符串等不同：
> -- ECMAScript 3 规范规定，一个正则表达式直接量在执行到它时转换为一个 RegExp 对象，同一段代码所表示正则表达式直接量每次运行都返回同一个对象。
> -- ECMAScript 5 规范则做了相反的规定，同一段代码所表示正则表达式直接量每次运行都返回新对象。

正则表达式的模式规则是由一个字符序列组成的。包括所有字母和数字在内，大多数都是按照直接量仅描述待匹配的字符串，例如正则表达式`/javascript/`可以匹配任何包含`javascript`子串的字符串。除此之外还包含其他具有特殊语义的字符，他们并不按照字面含义匹配。比如`/s$/`，`$`是一个具有特殊语义的元字符，用以匹配字符串的结束，所以这个正则表达式可以匹配任何以"s"结尾的字符串。

### 直接量字符串

正则表达式中的所有字母和数字都是按照字面含义进行匹配的。通过反斜线（ \ ）作为前缀进行转义可支持非字母的字符匹配。下表为正则表达式中的直接量字符

| 字符             | 匹配                                                            |
| ---------------- | --------------------------------------------------------------- |
| Content cell 1   | Content cell 2                                                  |
| Content column 1 | Content column 2                                                |
| \o               | NUL 字符                                                        |
| \t               | 制表符                                                          |
| \n               | 换行符                                                          |
| \v               | 垂直制表符                                                      |
| \f               | 换页符                                                          |
| \r               | 回车符                                                          |
| \x*nn*           | 由十六进制数 nn 指定的拉丁字符，例如：`\OA` 等价于 `\n`         |
| \u*xxxx*         | 由十六进制数 xxxx 指定的 Unicode 字符，例如：`\u0009`等价于`\t` |
| \c*X*            | 控制字符^_X_，例如：`\cJ`等价于`\n`                             |

> 正则表达式中具有特殊含义的标点符号：`^` `$` `.` `*` `+` `?` `=` `!` `:` `|` `\` `/` `(` `)` `[` `]` `{` `}`，正则表达式中匹配这些符号需要转义

### 字符类

将直接量字符单独放进括号内就组成了字符类。一个字符类可以匹配它所包含的任意字符。例如：正则表达式`/[abc]/`可以和字母"a"、"b"、"c"中的的任何一个匹配，正则表达式`/[^abc]/`匹配"a"、"b"、"c"以外的所有字符。字符类可以使用连字符`-`来表示字符范围，如`[a-zA-z0-9]`

| 字符   | 匹配                                              |
| ------ | ------------------------------------------------- |
| [...]  | 方括号内的任意字符                                |
| [^...] | 不在方括号内的任意字符                            |
| .      | 除换行符和其他 Unicode 行终止符之外的任意字符     |
| \w     | 任何 ASCII 字符组成的单词，等价于[a-zA-z0-9]      |
| \W     | 任何不是 ASCII 字符组成的单词，等价于[^a-za-z0-9] |
| \s     | 任何 Unicode 空白符                               |
| \S     | 任何 非 Unicode 空白符，注意\w 和\S 不同          |
| \d     | 任何 ASCII 数字，等价于[0-9]                      |
| \D     | 除 ASCII 数字之外的任何字符，等价于[^0-9]         |
| [\b]   | 退格直接量（特例）                                |

> 方括号内也可以使用特殊转义字符，如`/[\s\d]/`匹配任意空白符或数字。特例：`[\b]`表示退格符

### 重复
